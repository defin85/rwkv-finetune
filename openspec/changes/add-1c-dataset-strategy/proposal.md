# Change: Стратегия разработки и подготовки датасетов для RWKV v7 (1C:Enterprise)

## Why
Проекту нужна формализованная стратегия подготовки обучающих данных под 1C:Enterprise программирование, чтобы обеспечить управляемое качество, воспроизводимость и предсказуемые итерации дообучения RWKV v7.

Без спецификации остаются риски: размытый состав датасета, утечки между train/eval, слабая трассируемость источников и нестабильные результаты между релизами.

## What Changes
- Добавляется capability по управлению жизненным циклом датасетов: сбор, нормализация, валидация, версионирование и выпуск.
- Фиксируется двухконтурная модель источников данных:
  - `core` для источников с явно допустимыми лицензиями;
  - `extended` для внутреннего mixed-use контура с обязательным provenance.
- Фиксируется языковая политика датасета: пользовательские промпты только на русском языке.
- Фиксируется целевая таксономия задач (генерация, рефакторинг, запросы 1C, объяснение/ревью) и базовый баланс для первых релизов:
  - генерация: 35%;
  - рефакторинг: 35%;
  - запросы 1C: 15%;
  - объяснение/ревью: 15%.
- Добавляются обязательные quality gates: dedup, синтаксическая и статическая проверка BSL, фильтры секретов/PII, контроль leakage.
- Определяется стратегия оценки: отдельные eval-наборы, репозиторно-временной split, регулярный цикл recuration по ошибкам модели.

## Impact
- Affected specs: `dataset-development` (new capability).
- Affected code:
  - `scripts/prepare_binidx.sh` (как целевой consumer формата `jsonl` с ключом `text`);
  - `scripts/train.sh` (как target runtime для `data_prefix`);
  - `README.md` и документация по датасетам (будут требовать синхронизации на этапе реализации).
